{
  "Comment": "This is a branching logic template",
  "StartsAt": "GeneratePayload",
  "States": {
    "GeneratePayload": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:REGION:ACCOUNT_ID:function:WORKFLOW_NAME_generatePayload",
      "Next": "ChoiceState"
    },
    "ChoiceState": {
      "Type": "Choice",
      "Choices": [
        {
          "And": [
            {
              "Variable": "$.isProcessingComplete",
              "BooleanEquals": true,
            },
            {
              "Variable": "$.data",
              "StringEquals": "Hello World",
            }
          ],
          "Next": "MicroserviceA"
        },
        {
          "Variable": "$.isProcessingComplete",
          "BooleanEquals": true,
          "Next": "MicroserviceB"
        },
      ],
      "Default": "PostProccesor"
    },

    "MicroserviceA": {
      "Type" : "Task",
      "Resource": "arn:aws:lambda:REGION:ACCOUNT_ID:function:WORKFLOW_NAME_microserviceA",
      "End": true
    },

    "MicroserviceB": {
      "Type" : "Task",
      "Resource": "arn:aws:lambda:REGION:ACCOUNT_ID:function:WORKFLOW_NAME_microserviceB",
      "End": true
    },

    "PostProccesor": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:REGION:ACCOUNT_ID:function:WORKFLOW_NAME_postProcessor",
      "Next": "GeneratePayload"
    }
  }
}
